(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-temperature"],{"01a6":function(t,a,e){"use strict";e.r(a);var i=e("c834"),n=e.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(r);a["default"]=n.a},"0fa4":function(t,a,e){"use strict";var i=e("49ed"),n=e.n(i);n.a},"28b7":function(t,a,e){"use strict";e.r(a);var i=e("bdfc"),n=e("01a6");for(var r in n)["default"].indexOf(r)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(r);e("0fa4");var s=e("828b"),o=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"41cf23ff",null,!1,i["a"],void 0);a["default"]=o.exports},"49ed":function(t,a,e){var i=e("eb9c");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("967d").default;n("617aae6f",i,!0,{sourceMap:!1,shadowMode:!1})},"73e1":function(t,a,e){"use strict";var i=e("29d8");t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(i)},"795c":function(t,a,e){"use strict";var i=e("8bdb"),n=e("db04").start,r=e("73e1");i({target:"String",proto:!0,forced:r},{padStart:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},bdfc:function(t,a,e){"use strict";e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return n})),e.d(a,"a",(function(){}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"flex-col page"},[e("v-uni-view",{staticClass:"flex-col header-section"},[e("v-uni-text",{staticClass:"title-text"},[e("v-uni-text",{staticClass:"icon-temp"},[t._v("🌡️")]),t._v("智能温度监测")],1)],1),e("v-uni-view",{staticClass:"data-card"},[e("v-uni-view",{staticClass:"flex-row data-display"},[e("v-uni-view",{staticClass:"value-container"},[e("v-uni-text",{staticClass:"main-value"},[t._v(t._s(t.currentTemp.toFixed(1)))]),e("v-uni-text",{staticClass:"unit"},[t._v("°C")])],1),e("v-uni-view",{staticClass:"status-indicator",class:t.tempStatus})],1),e("v-uni-view",{staticClass:"status-message",class:t.tempStatus},[e("v-uni-text",{staticClass:"message-text"},[t._v(t._s(t.statusMessage))]),e("v-uni-text",{staticClass:"message-icon"},[t._v(t._s(t.statusIcon))])],1),e("v-uni-view",{staticClass:"quality-scale"},[e("v-uni-view",{staticClass:"scale-item high",class:{active:"high"===t.tempStatus}}),e("v-uni-view",{staticClass:"scale-item normal",class:{active:"normal"===t.tempStatus}}),e("v-uni-view",{staticClass:"scale-item low",class:{active:"low"===t.tempStatus}})],1)],1),t.energySavingTip?e("v-uni-view",{staticClass:"info-tip"},[e("v-uni-text",{staticClass:"tip-icon"},[t._v("💡")]),e("v-uni-text",{staticClass:"tip-text"},[t._v(t._s(t.energySavingTip))])],1):t._e(),e("v-uni-view",{staticClass:"chart-section"},[e("v-uni-text",{staticClass:"section-title"},[t._v("温度变化趋势 ("+t._s("hour"===t.timeFrame?"最近1小时":"最近7天")+")")]),e("v-uni-view",{staticClass:"chart-container"},[e("v-uni-canvas",{staticClass:"chart",attrs:{id:"temperatureChart"}})],1),e("v-uni-view",{staticClass:"flex-row time-controls"},[e("v-uni-button",{staticClass:"time-button",class:{active:"hour"===t.timeFrame},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.toggleTimeFrame("hour")}}},[t._v("小时数据")]),e("v-uni-button",{staticClass:"time-button",class:{active:"day"===t.timeFrame},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.toggleTimeFrame("day")}}},[t._v("每日数据")])],1)],1),t.systemStatusTip?e("v-uni-view",{staticClass:"system-tip"},[e("v-uni-text",{staticClass:"tip-icon"},[t._v("ℹ️")]),e("v-uni-text",{staticClass:"tip-text"},[t._v(t._s(t.systemStatusTip))])],1):t._e()],1)},n=[]},c834:function(t,a,e){"use strict";e("6a54");var i=e("3639").default,n=e("f5bd").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(e("2634")),s=n(e("b7c7")),o=n(e("2fdc"));e("c223"),e("f7a5"),e("fd3c"),e("795c"),e("c9b5"),e("bf0f"),e("ab80"),e("e838");var c=i(e("b4e9")),f=n(e("e4d6")),l={data:function(){return{currentTemp:0,tempData:[],timeData:[],chart:null,timeFrame:"hour",dataUpdateInterval:null,chartUpdateInterval:null,systemStatus:"normal",colorConfig:{high:"#FF5252",normal:"#4CAF50",low:"#2196F3"},chartOptions:{title:{text:"温度变化趋势",left:"center",textStyle:{fontSize:14,color:"#2c3e50"}},tooltip:{trigger:"item",formatter:function(t){return"".concat(t.name,"<br/>温度: ").concat(t.value.toFixed(1),"°C")},backgroundColor:"#ffffff",borderColor:"#4CAF50",borderWidth:1,textStyle:{color:"#333"}},grid:{left:"3%",right:"3%",bottom:"12%",top:"20%",containLabel:!0},xAxis:{type:"category",data:[],axisLabel:{fontSize:10,color:"#666"},axisLine:{lineStyle:{color:"#ddd"}},interval:2},yAxis:{type:"value",name:"温度 (°C)",nameTextStyle:{color:"#666",padding:[0,0,0,30]},axisLabel:{fontSize:10,color:"#666"},axisLine:{show:!0,lineStyle:{color:"#ddd"}},splitLine:{lineStyle:{color:"#f0f0f0"}},min:-10,max:40,interval:10},series:[{type:"line",data:[],smooth:!0,lineStyle:{color:"#4CAF50",width:3},areaStyle:{color:new c.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(255, 87, 34, 0.3)"},{offset:1,color:"rgba(255, 87, 34, 0.1)"}])},symbol:"circle",symbolSize:6,itemStyle:{color:"#4CAF50",borderColor:"#fff",borderWidth:1}}]}}},computed:{tempStatus:function(){return this.currentTemp>28?"high":this.currentTemp<10?"low":"normal"},statusMessage:function(){return{high:"温度过高",normal:"温度适宜",low:"温度过低"}[this.tempStatus]},statusIcon:function(){return{high:"🥵",normal:"🙂",low:"🥶"}[this.tempStatus]},energySavingTip:function(){return this.currentTemp>28?"检测到高温，建议开启空调系统":this.currentTemp<10?"检测到低温，建议开启供暖系统":"当前温度适宜，建议关闭多余设备节能"},systemStatusTip:function(){return{normal:"系统运行正常，温度监测功能已启用",saving:"当前处于节能模式，已自动调整风扇设置",warning:"检测到温度传感器数据异常，请检查设备"}[this.systemStatus]}},mounted:function(){var t=this;this.initChart(),this.getTempData(),this.dataUpdateInterval=setInterval(this.getTempData,6e4),this.chartUpdateInterval=setInterval(this.updateChartData,6e4),uni.onWindowResize((function(){var a;return null===(a=t.chart)||void 0===a?void 0:a.resize()}))},beforeDestroy:function(){var t;clearInterval(this.dataUpdateInterval),clearInterval(this.chartUpdateInterval),null===(t=this.chart)||void 0===t||t.dispose()},methods:{initChart:function(){var t=document.getElementById("temperatureChart");t&&(this.chart=c.init(t,"light"),this.chart.setOption(this.chartOptions))},getTempData:function(){var t=this;return(0,o.default)((0,r.default)().mark((function a(){var e;return(0,r.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,uni.request({url:"".concat(f.default.baseURL,"/data"),method:"GET",timeout:8e3});case 3:e=a.sent,e.data&&(t.currentTemp=e.data.temperature||0,t.tempData=[].concat((0,s.default)(t.tempData.slice(-59)),[t.currentTemp]),t.timeData=[].concat((0,s.default)(t.timeData.slice(-59)),[new Date]),t.updateChart(),t.updateSystemStatus()),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](0),console.error("温度数据获取失败:",a.t0),t.systemStatus="warning";case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))()},updateChart:function(){var t=this,a=this.timeData.map((function(a){return"hour"===t.timeFrame?"".concat(a.getHours(),":").concat(a.getMinutes().toString().padStart(2,"0")):"".concat(a.getDate(),"/").concat(a.getMonth()+1)})),e="hour"===this.timeFrame?6:5;this.chartOptions.xAxis.interval=Math.max(1,Math.floor(a.length/e)),this.chart.setOption({xAxis:{data:a},series:[{data:this.tempData}]})},toggleTimeFrame:function(t){this.timeFrame=t,this.tempData=[],this.timeData=[],this.getTempData()},updateSystemStatus:function(){this.currentTemp>28?this.systemStatus="saving":this.tempData.length>10&&this.tempData.slice(-5).every((function(t){return t<5}))?this.systemStatus="warning":this.systemStatus="normal"},updateChartData:function(){this.tempData.length>0&&(this.updateChart(),this.checkTemperatureTrend())},checkTemperatureTrend:function(){if(this.tempData.length>=5){var t=this.tempData.slice(-5),a=parseFloat((t[4]-t[0]).toFixed(1));if(a>3)return void(this.systemStatusTip="⚠️ 温度快速上升中 (".concat(a.toFixed(1),"°C/5分钟)，建议打开降温系统"));if(a<-3)return void(this.systemStatusTip="⚠️ 温度快速下降中 (".concat(a.toFixed(1),"°C/5分钟)，建议检查暖气系统"))}}}};a.default=l},db04:function(t,a,e){"use strict";var i=e("bb80"),n=e("c435"),r=e("9e70"),s=e("f298"),o=e("862c"),c=i(s),f=i("".slice),l=Math.ceil,u=function(t){return function(a,e,i){var s,u,d=r(o(a)),v=n(e),p=d.length,m=void 0===i?" ":r(i);return v<=p||""===m?d:(s=v-p,u=c(m,l(s/m.length)),u.length>s&&(u=f(u,0,s)),t?d+u:u+d)}};t.exports={start:u(!1),end:u(!0)}},e4d6:function(t,a,e){"use strict";e("6a54"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i={baseURL:uni.getStorageSync("esp32_ip")||"http://192.168.4.1:5000"};a.default=i},eb9c:function(t,a,e){var i=e("c86c");a=i(!1),a.push([t.i,".page[data-v-41cf23ff]{padding:20px;background:#f8f9fa;min-height:100vh;--high-color:#ff5252;--normal-color:#4caf50;--low-color:#2196f3}.header-section[data-v-41cf23ff]{margin-bottom:25px}.title-text[data-v-41cf23ff]{font-size:22px;color:#2c3e50;font-weight:600;display:flex;align-items:center}.icon-temp[data-v-41cf23ff]{font-size:26px;margin-right:10px}.data-card[data-v-41cf23ff]{background:#fff;border-radius:12px;padding:25px;box-shadow:0 2px 8px rgba(0,0,0,.1);margin-bottom:20px}.data-display[data-v-41cf23ff]{justify-content:space-between;align-items:center;margin-bottom:20px}.value-container[data-v-41cf23ff]{display:flex;align-items:baseline}.main-value[data-v-41cf23ff]{font-size:48px;font-weight:700;color:#1d2129;margin-right:8px}.unit[data-v-41cf23ff]{font-size:18px;color:#86909c;position:relative;top:-2px}.status-indicator[data-v-41cf23ff]{width:20px;height:20px;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.1);transition:background .3s ease;background:var(--normal-color)}.status-message[data-v-41cf23ff]{padding:12px;border-radius:8px;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.quality-scale[data-v-41cf23ff]{height:6px;background:#eee;border-radius:3px;display:flex;overflow:hidden}.scale-item[data-v-41cf23ff]{flex:1;opacity:.3;transition:opacity .3s}.info-tip[data-v-41cf23ff], .system-tip[data-v-41cf23ff]{padding:15px;border-radius:8px;display:flex;align-items:center;margin-bottom:20px}.info-tip[data-v-41cf23ff]{background:#e3f2fd}.system-tip[data-v-41cf23ff]{background:#f5f5f5;border:1px solid #e0e0e0} \n    \n    /* 状态颜色定义 */.optimal[data-v-41cf23ff]{background:#4caf50} \n    \n    /* 统一状态样式 */.high[data-v-41cf23ff]{background:var(--high-color)}.normal[data-v-41cf23ff]{background:var(--normal-color)}.low[data-v-41cf23ff]{background:var(--low-color)} \n    \n    /* 状态指示灯 */.status-indicator.high[data-v-41cf23ff]{background:var(--high-color)}.status-indicator.normal[data-v-41cf23ff]{background:var(--normal-color)}.status-indicator.low[data-v-41cf23ff]{background:var(--low-color)} \n    \n    /* 状态消息框 */.status-message.high[data-v-41cf23ff]{background:rgba(255,82,82,.1)}.status-message.normal[data-v-41cf23ff]{background:rgba(76,175,80,.1)}.status-message.low[data-v-41cf23ff]{background:rgba(33,150,243,.1)} \n    \n    /* 状态文字颜色 */.message-text.high[data-v-41cf23ff]{color:var(--high-color)}.message-text.normal[data-v-41cf23ff]{color:var(--normal-color)}.message-text.low[data-v-41cf23ff]{color:var(--low-color)} \n    \n    /* 状态条激活状态 */.scale-item.high.active[data-v-41cf23ff]{background:var(--high-color)}.scale-item.normal.active[data-v-41cf23ff]{background:var(--normal-color)}.scale-item.low.active[data-v-41cf23ff]{background:var(--low-color)} \n    \n    /* 质量刻度条基础颜色 */.quality-scale .high[data-v-41cf23ff]{background:var(--high-color)}.quality-scale .normal[data-v-41cf23ff]{background:var(--normal-color)}.quality-scale .low[data-v-41cf23ff]{background:var(--low-color)}.status-message.high[data-v-41cf23ff]{background:rgba(255,82,82,.1)}.status-message.normal[data-v-41cf23ff]{background:rgba(76,175,80,.1)}.status-message.low[data-v-41cf23ff]{background:rgba(33,150,243,.1)}.tip-icon[data-v-41cf23ff]{font-size:20px;margin-right:10px}.tip-text[data-v-41cf23ff]{font-size:14px;color:#1976d2;line-height:1.4}.system-tip .tip-text[data-v-41cf23ff]{color:#666}.chart-section[data-v-41cf23ff]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,.1);margin-bottom:20px}.section-title[data-v-41cf23ff]{font-size:16px;color:#2c3e50;font-weight:500;margin-bottom:15px;display:block}.chart-container[data-v-41cf23ff]{width:100%;height:300px;background:#fff;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,.1);padding:10px;box-sizing:border-box}.chart[data-v-41cf23ff]{width:100%;height:100%}.time-controls[data-v-41cf23ff]{margin-top:15px;justify-content:space-between}.time-button[data-v-41cf23ff]{flex:1;margin:0 5px;padding:8px 0;border-radius:6px;background:#f0f0f0;color:#666;font-size:14px;border:none}.time-button.active[data-v-41cf23ff]{background:#4caf50;color:#fff}",""]),t.exports=a}}]);