(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-analyse"],{"2d66":function(t,a,e){"use strict";e.r(a);var n=e("3223"),i=e("57fc");for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(o);e("b036");var s=e("828b"),r=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"2510660d",null,!1,n["a"],void 0);a["default"]=r.exports},3223:function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return i})),e.d(a,"a",(function(){}));var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"page"},[e("v-uni-view",{staticClass:"data-card"},[e("v-uni-view",{staticClass:"flex-row date-picker"},[e("v-uni-picker",{attrs:{mode:"date",value:t.currentDate},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.dateChange.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"date-input"},[t._v(t._s(t.currentDate)),e("v-uni-image",{staticClass:"calendar-icon",attrs:{src:"/static/calendar.png"}})],1)],1)],1),e("v-uni-view",{staticClass:"input-group"},[e("v-uni-view",{staticClass:"input-item"},[e("v-uni-text",{staticClass:"input-label"},[t._v("å½“æ—¥è¥æ”¶")]),e("v-uni-input",{staticClass:"input-box",attrs:{type:"number",placeholder:"Â¥"},model:{value:t.formData.income,callback:function(a){t.$set(t.formData,"income",a)},expression:"formData.income"}})],1),e("v-uni-view",{staticClass:"input-item"},[e("v-uni-text",{staticClass:"input-label"},[t._v("é£Ÿææ”¯å‡º")]),e("v-uni-input",{staticClass:"input-box",attrs:{type:"number",placeholder:"Â¥"},model:{value:t.formData.foodCost,callback:function(a){t.$set(t.formData,"foodCost",a)},expression:"formData.foodCost"}})],1),e("v-uni-view",{staticClass:"input-item"},[e("v-uni-text",{staticClass:"input-label"},[t._v("ç”¨ç”µæ”¯å‡º")]),e("v-uni-input",{staticClass:"input-box",attrs:{type:"number",placeholder:"Â¥"},model:{value:t.formData.energyCost,callback:function(a){t.$set(t.formData,"energyCost",a)},expression:"formData.energyCost"}})],1),e("v-uni-view",{staticClass:"input-item"},[e("v-uni-text",{staticClass:"input-label"},[t._v("å…¶ä»–æ”¯å‡º")]),e("v-uni-input",{staticClass:"input-box",attrs:{type:"number",placeholder:"Â¥"},model:{value:t.formData.otherCost,callback:function(a){t.$set(t.formData,"otherCost",a)},expression:"formData.otherCost"}})],1)],1),e("v-uni-view",{staticClass:"submit-btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.saveData.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"btn-text"},[t._v("ä¿å­˜æ•°æ®")])],1)],1),e("v-uni-view",{staticClass:"chart-container"},[e("v-uni-view",{staticClass:"chart-card"},[e("v-uni-text",{staticClass:"chart-title"},[t._v(t._s(t.currentDate)+" æ”¯å‡ºæ„æˆ")]),t.dailyChartVisible?e("v-uni-canvas",{staticClass:"chart",attrs:{id:"dailyChart"}}):e("v-uni-view",{staticClass:"no-data"},[t._v("æš‚æ— æ”¯å‡ºæ•°æ®")]),t.dailySuggestions.length>0?e("v-uni-view",{staticClass:"suggestion-box"},[e("v-uni-text",{staticClass:"suggestion-title"},[t._v("æ™ºèƒ½ä¼˜åŒ–å»ºè®®")]),t._l(t.dailySuggestions,(function(a,n){return e("v-uni-view",{key:n,staticClass:"suggestion-item"},[e("v-uni-image",{staticClass:"suggestion-icon",attrs:{src:"/static/bulb.png"}}),e("v-uni-text",{staticClass:"suggestion-text"},[t._v(t._s(a))])],1)}))],2):t._e()],1),e("v-uni-view",{staticClass:"chart-card"},[e("v-uni-text",{staticClass:"chart-title"},[t._v(t._s(t.currentMonth)+"æœˆç´¯è®¡åˆ†æ")]),t.monthChartVisible?e("v-uni-canvas",{staticClass:"chart",attrs:{id:"monthChart"}}):e("v-uni-view",{staticClass:"no-data"},[t._v("æš‚æ— æœˆåº¦æ•°æ®")]),t.monthSuggestions.length>0?e("v-uni-view",{staticClass:"suggestion-box"},[e("v-uni-text",{staticClass:"suggestion-title"},[t._v("ç»è¥ç­–ç•¥å»ºè®®")]),t._l(t.monthSuggestions,(function(a,n){return e("v-uni-view",{key:n,staticClass:"suggestion-item"},[e("v-uni-image",{staticClass:"suggestion-icon",attrs:{src:"/static/analysis.png"}}),e("v-uni-text",{staticClass:"suggestion-text"},[t._v(t._s(a))])],1)}))],2):t._e()],1)],1)],1)},i=[]},4430:function(t,a,e){var n=e("c207");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=e("967d").default;i("63b3b826",n,!0,{sourceMap:!1,shadowMode:!1})},"57fc":function(t,a,e){"use strict";e.r(a);var n=e("e28b"),i=e.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(o);a["default"]=i.a},b036:function(t,a,e){"use strict";var n=e("4430"),i=e.n(n);i.a},c207:function(t,a,e){var n=e("c86c");a=n(!1),a.push([t.i,".page[data-v-2510660d]{padding:%?30?%;background:linear-gradient(180deg,#f8fafc,#f0f4f9)}.date-picker[data-v-2510660d]{margin-bottom:%?40?%}.input-box[data-v-2510660d]::-webkit-input-placeholder{color:#94a3b8;opacity:.6}.input-box[data-v-2510660d]::placeholder{color:#94a3b8;opacity:.6}.chart-card .legend[data-v-2510660d]{margin-top:%?20?%;text-align:center;font-size:%?24?%;color:#64748b}.data-card[data-v-2510660d]{background:hsla(0,0%,100%,.95);border-radius:%?24?%;padding:%?30?%;box-shadow:0 %?8?% %?24?% rgba(0,0,0,.06)}.date-input[data-v-2510660d]{display:flex;align-items:center;justify-content:space-between;font-size:%?32?%;color:#1e293b;padding:%?16?% %?30?%;background:#f1f5f9;border-radius:%?12?%}.calendar-icon[data-v-2510660d]{width:%?40?%;height:%?40?%}\r\n/* ä¿®æ”¹åŸ.no-dataæ ·å¼ */.no-data[data-v-2510660d]{height:%?500?%;display:flex;align-items:center;justify-content:center;color:#94a3b8;font-size:%?28?%;background:rgba(241,245,249,.5);border-radius:%?24?%}.input-group[data-v-2510660d]{margin-bottom:%?40?%}.input-item[data-v-2510660d]{margin-bottom:%?30?%}.input-label[data-v-2510660d]{display:block;font-size:%?28?%;color:#64748b;margin-bottom:%?12?%}.input-box[data-v-2510660d]{width:100%;height:%?80?%;padding:0 %?30?%;background:#f8fafc;border-radius:%?16?%;font-size:%?32?%;color:#1e293b;border:%?2?% solid #e2e8f0;transition:all .3s}.input-box[data-v-2510660d]:focus{border-color:#3b82f6;box-shadow:0 0 %?8?% rgba(59,130,246,.2)}.submit-btn[data-v-2510660d]{background:linear-gradient(135deg,#3b82f6,#6366f1);height:%?100?%;border-radius:%?16?%;display:flex;align-items:center;justify-content:center;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}.submit-btn[data-v-2510660d]:active{-webkit-transform:scale(.98);transform:scale(.98)}.btn-text[data-v-2510660d]{color:#fff;font-size:%?32?%;font-weight:500;letter-spacing:%?1?%}.chart-container[data-v-2510660d]{margin-top:%?40?%}.chart-card[data-v-2510660d]{background:#fff;border-radius:%?24?%;padding:%?30?%;margin-bottom:%?30?%;box-shadow:0 %?8?% %?24?% rgba(0,0,0,.06)}.chart-title[data-v-2510660d]{display:block;font-size:%?32?%;color:#1e293b;font-weight:600;margin-bottom:%?30?%}.chart[data-v-2510660d]{width:100%;height:%?500?%}@media (max-width:768px){.no-data[data-v-2510660d]{height:%?400?%;font-size:%?24?%}}@media (max-width:768px){.chart[data-v-2510660d]{height:%?400?%}.date-input[data-v-2510660d]{font-size:%?28?%;padding:%?12?% %?24?%}}\r\n/*æå»ºè®®*/.suggestion-box[data-v-2510660d]{margin-top:%?30?%;padding:%?25?%;background:#f8fafc;border-radius:%?16?%}.suggestion-title[data-v-2510660d]{display:block;font-size:%?28?%;color:#3b82f6;font-weight:500;margin-bottom:%?20?%}.suggestion-item[data-v-2510660d]{display:flex;align-items:center;margin:%?15?% 0;padding:%?15?%;background:rgba(59,130,246,.05);border-radius:%?12?%}.suggestion-icon[data-v-2510660d]{width:%?36?%;height:%?36?%;margin-right:%?15?%}.suggestion-text[data-v-2510660d]{font-size:%?26?%;color:#475569;line-height:1.6;flex:1}",""]),t.exports=a},e28b:function(t,a,e){"use strict";e("6a54");var n=e("3639").default,i=e("f5bd").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=i(e("2634")),s=i(e("2fdc")),r=i(e("9b1b"));e("f7a5"),e("e966"),e("bf0f"),e("e838"),e("fd3c"),e("8f71"),e("de6c"),e("9db6"),e("473f"),e("aa9c"),e("c223");var c=n(e("4500")),u={data:function(){return{currentDate:this.getTodayDate(),currentMonth:this.getCurrentMonth(),formData:this.initFormData(),dailyChartVisible:!1,monthChartVisible:!1,dailySuggestions:[],monthSuggestions:[]}},mounted:function(){this.loadData()},methods:{getTodayDate:function(){return(new Date).toISOString().slice(0,10)},getCurrentMonth:function(){return(new Date).getMonth()+1},initFormData:function(){return{income:"",foodCost:"",energyCost:"",otherCost:""}},dateChange:function(t){this.currentDate=t.detail.value,this.currentMonth=parseInt(this.currentDate.split("-")[1]),this.loadData()},loadData:function(){var t=uni.getStorageSync(this.currentDate)||this.initFormData();this.formData=(0,r.default)({},t),this.updateCharts()},validateForm:function(){var t=this;return["income","foodCost","energyCost","otherCost"].every((function(a){var e=parseFloat(t.formData[a]);return!isNaN(e)&&e>=0}))},saveData:function(){var t=this;return(0,s.default)((0,o.default)().mark((function a(){var e;return(0,o.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.validateForm()){a.next=3;break}return uni.showToast({title:"è¯·å¡«å†™æœ‰æ•ˆçš„æ•°å­—",icon:"none"}),a.abrupt("return");case 3:try{e={income:parseFloat(t.formData.income),foodCost:parseFloat(t.formData.foodCost),energyCost:parseFloat(t.formData.energyCost),otherCost:parseFloat(t.formData.otherCost)},uni.setStorageSync(t.currentDate,e),uni.showToast({title:"ä¿å­˜æˆåŠŸ",icon:"success"}),t.updateCharts()}catch(n){uni.showToast({title:"ä¿å­˜å¤±è´¥",icon:"none"})}case 4:case"end":return a.stop()}}),a)})))()},getMonthData:function(){var t=this.currentDate.substr(0,7),a=uni.getStorageInfoSync().keys.filter((function(a){return a.startsWith(t)})).map((function(t){return uni.getStorageSync(t)}));return a.reduce((function(t,a){return{income:t.income+a.income,foodCost:t.foodCost+a.foodCost,energyCost:t.energyCost+a.energyCost,otherCost:t.otherCost+a.otherCost}}),{income:0,foodCost:0,energyCost:0,otherCost:0})},updateCharts:function(){var t=uni.getStorageSync(this.currentDate);if(t&&this.hasExpenseData(t)){this.dailyChartVisible=!0;var a=[{name:"é£Ÿææ”¯å‡º",value:t.foodCost},{name:"ç”¨ç”µæ”¯å‡º",value:t.energyCost},{name:"å…¶ä»–æ”¯å‡º",value:t.otherCost}];this.initChart("dailyChart",a,["#36A2EB","#4BC0C0","#FF9F40"],!0)}else this.dailyChartVisible=!1;var e=this.getMonthData();if(e.income>0){this.monthChartVisible=!0;var n=e.foodCost+e.energyCost+e.otherCost,i=[{name:"æ€»è¥æ”¶",value:e.income},{name:"æ€»æˆæœ¬",value:n},{name:"å‡€åˆ©æ¶¦",value:e.income-n}];this.initChart("monthChart",i,["#4CAF50","#FF9800","#2196F3"])}else this.monthChartVisible=!1;this.dailySuggestions=this.generateDailySuggestions(t),this.monthSuggestions=this.generateMonthSuggestions(e)},hasExpenseData:function(t){return t.foodCost>0||t.energyCost>0||t.otherCost>0},initChart:function(t,a,e){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=c.init(document.getElementById(t)),o=a.filter((function(t){return t.value>0})),s={tooltip:{formatter:n?"{b} : Â¥{c} ({d}%)":"{b}: Â¥{c}"},series:[{type:"pie",radius:n?["45%","70%"]:"65%",data:o,label:{fontSize:24,formatter:n?"{b|{b}}\n{d}%":"{b|{b}}\nÂ¥{c}",rich:{b:{fontSize:24,color:"#333"}}},itemStyle:{borderRadius:8,borderColor:"#fff",borderWidth:4,color:function(t){return new c.graphic.LinearGradient(0,0,0,1,[{offset:0,color:e[t.dataIndex]+"FF"},{offset:1,color:e[t.dataIndex]+"88"}])}}}]};n||(s.legend={bottom:20,itemWidth:14,itemHeight:14,textStyle:{fontSize:24}}),i.setOption(s)},generateDailySuggestions:function(t){var a=[],e=t.foodCost+t.energyCost+t.otherCost;return t.energyCost>50&&a.push("æ£€æµ‹åˆ°è¾ƒé«˜ç”¨ç”µæ”¯å‡ºï¼Œå»ºè®®ï¼š1.æ£€æŸ¥é™æ¸©è®¾å¤‡æ¸©åº¦è®¾ç½® 2.å¯ç”¨è‡ªåŠ¨ä¾›ç”µæ¨¡å¼"),t.foodCost/e>.4&&a.push("é£Ÿææˆæœ¬å æ¯”è¿‡é«˜ï¼Œå»ºè®®ï¼š1.æ£€æŸ¥ä¾›è´§æ¸ é“ 2.å¯»æ‰¾æ–°è¿›è´§é€”å¾„"),t.energyCost>30&&t.energyCost/e>.3&&a.push("æ£€æµ‹åˆ°èŠ‚èƒ½ä¼˜åŒ–ç©ºé—´ï¼Œå»ºè®®æ¥å…¥æ™ºèƒ½ç”µè¡¨è¿›è¡Œè®¾å¤‡çº§èƒ½è€—ç›‘æ§"),t.income>1e3&&a.push("æ£€æµ‹åˆ°é«˜è¥æ”¶æ—¥æ¨¡å¼ï¼Œå»ºè®®ï¼š1.å¢åŠ å¤‡è´§é‡ 2.å¢åŠ å‘˜å·¥æ’ç­è¿›è¡Œè°ƒä¼‘"),t.income<300&&a.push("æ£€æµ‹åˆ°ä½è¥æ”¶æ—¥æ¨¡å¼ï¼Œå»ºè®®ï¼š1.è¿›è¡Œå¹¿å‘Šå®£å‘ 2.ä¸¾åŠä¼˜æƒ æ´»åŠ¨"),a.slice(0,3)},generateMonthSuggestions:function(t){var a=[],e=t.foodCost+t.energyCost+t.otherCost,n=t.income-e;if(t.income>0&&t.energyCost>0){var i=t.energyCost/t.income*100,o=i.toFixed(1)+"%";i>8?(a.push("âš ï¸ ç”µè´¹å æ¯”è¿‡é«˜ï¼ˆ".concat(o,"ï¼‰ï¼Œè¶…å‡ºè¡Œä¸šè­¦æˆ’çº¿ï¼ˆ").concat(8,"%ï¼‰ï¼š")),a.push("1. ä¼˜å…ˆæ£€æŸ¥åˆ¶å†·/åˆ¶çƒ­è®¾å¤‡æ•ˆç‡"),a.push("2. ä¼˜åŒ–è®¾å¤‡è¿è¡Œæ—¶é—´æ®µï¼ˆé”™å³°ç”¨ç”µï¼‰"),a.push("3. è€ƒè™‘å‡çº§èƒ½æ•ˆç­‰çº§æ›´é«˜çš„è®¾å¤‡")):i>6?(a.push("âš¡ ç”µè´¹å æ¯”ï¼ˆ".concat(o,"ï¼‰ç•¥é«˜äºè¡Œä¸šå¹³å‡ï¼ˆ").concat(6,"%ï¼‰ï¼š")),a.push("1. æ£€æŸ¥ç…§æ˜è®¾å¤‡ä½¿ç”¨æƒ…å†µï¼ˆæ”¹ç”¨LEDï¼‰"),a.push("2. è°ƒæ•´å†·è—è®¾å¤‡æ¸©åº¦è®¾ç½®")):i<4?a.push("âœ… ç”µè´¹æ§åˆ¶ä¼˜ç§€ï¼ˆ".concat(o,"ï¼‰ï¼Œä½äºä¼˜ç§€æ ‡å‡†ï¼ˆ").concat(4,"%ï¼‰")):a.push("ğŸ“Š å½“å‰ç”µè´¹å æ¯” ".concat(o,"ï¼Œå¤„äºè¡Œä¸šåˆç†æ°´å¹³ï¼ˆ").concat(6,"%ï¼‰"));var s=t.income/t.energyCost;a.push("æ¯å…ƒç”µè´¹åˆ›é€ è¥æ”¶ï¼šÂ¥".concat(s.toFixed(1)))}return n/t.income<.2&&a.push("å½“å‰åˆ©æ¶¦ç‡".concat((n/t.income*100).toFixed(1),"%ï¼Œå»ºè®®ä¼˜åŒ–æˆæœ¬ç»“æ„")),a.slice(0,5)},getAverage:function(t){var a=uni.getStorageInfoSync().keys.map((function(a){return uni.getStorageSync(a)[t]||0}));return a.reduce((function(t,a){return t+a}),0)/(a.length||1)}}};a.default=u}}]);