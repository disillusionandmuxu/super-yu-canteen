(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-humidity"],{"0eae":function(t,a,e){var i=e("be82");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=e("967d").default;s("9e082972",i,!0,{sourceMap:!1,shadowMode:!1})},1266:function(t,a,e){"use strict";e.r(a);var i=e("218e"),s=e.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(n);a["default"]=s.a},"218e":function(t,a,e){"use strict";e("6a54");var i=e("3639").default,s=e("f5bd").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=s(e("2634")),r=s(e("b7c7")),o=s(e("2fdc"));e("c223"),e("f7a5"),e("fd3c"),e("795c"),e("c9b5"),e("bf0f"),e("ab80"),e("e838");var c=i(e("4500")),d=s(e("4e5d")),u={data:function(){return{currentHumidity:0,humidityData:[],timeData:[],chart:null,timeFrame:"hour",dataUpdateInterval:null,chartUpdateInterval:null,systemStatus:"normal",chartOptions:{title:{text:"ÊπøÂ∫¶ÂèòÂåñË∂ãÂäø",left:"center",textStyle:{fontSize:14,color:"#2c3e50"}},tooltip:{trigger:"item",formatter:function(t){return"".concat(t.name,"<br/>ÊπøÂ∫¶: ").concat(t.value.toFixed(1),"%RH")},backgroundColor:"#ffffff",borderColor:"#2196F3",borderWidth:1,textStyle:{color:"#333"}},grid:{left:"3%",right:"3%",bottom:"12%",top:"20%",containLabel:!0},xAxis:{type:"category",data:[],axisLabel:{fontSize:10,color:"#666"},axisLine:{lineStyle:{color:"#ddd"}},interval:2},yAxis:{type:"value",name:"ÊπøÂ∫¶ (%RH)",nameTextStyle:{color:"#666",padding:[0,0,0,30]},axisLabel:{fontSize:10,color:"#666"},axisLine:{show:!0,lineStyle:{color:"#ddd"}},splitLine:{lineStyle:{color:"#f0f0f0"}},min:0,max:100,interval:20},series:[{type:"line",data:[],smooth:!0,lineStyle:{color:"#2196F3",width:3},areaStyle:{color:new c.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(33, 150, 243, 0.3)"},{offset:1,color:"rgba(33, 150, 243, 0.1)"}])},symbol:"circle",symbolSize:6,itemStyle:{color:"#2196F3",borderColor:"#fff",borderWidth:1}}]}}},computed:{humidityStatus:function(){return this.currentHumidity<30?"dry":this.currentHumidity<70?"comfortable":"humid"},statusMessage:function(){return{dry:"ÁéØÂ¢ÉÂπ≤Áá•",comfortable:"ÊπøÂ∫¶ËàíÈÄÇ",humid:"ÁéØÂ¢ÉÊΩÆÊπø"}[this.humidityStatus]},statusIcon:function(){return{dry:"üèúÔ∏è",comfortable:"üòä",humid:"üåßÔ∏è"}[this.humidityStatus]},humidityTip:function(){return this.currentHumidity<30?"Ê£ÄÊµãÂà∞ÁéØÂ¢ÉÂπ≤Áá•ÔºåÂª∫ËÆÆÂºÄÂêØÂä†ÊπøÂô®ÊàñÊîæÁΩÆÊ∞¥ÁõÜÂ¢ûÂä†ÊπøÂ∫¶":this.currentHumidity>70?"Ê£ÄÊµãÂà∞ÁéØÂ¢ÉÊΩÆÊπøÔºåÂª∫ËÆÆÂºÄÂêØÈô§ÊπøËÆæÂ§áÊàñÈÄöÈ£é":null},systemStatusTip:function(){return{normal:"Á≥ªÁªüËøêË°åÊ≠£Â∏∏ÔºåÊπøÂ∫¶ÁõëÊµãÂäüËÉΩÂ∑≤ÂêØÁî®",saving:"ÂΩìÂâçÂ§Ñ‰∫éËäÇËÉΩÊ®°ÂºèÔºåÂ∑≤Ëá™Âä®Ë∞ÉÊï¥Èô§ÊπøËÆæÂ§áËøêË°åÈ¢ëÁéá",warning:"Ê£ÄÊµãÂà∞ÊπøÂ∫¶‰º†ÊÑüÂô®Êï∞ÊçÆÂºÇÂ∏∏ÔºåËØ∑Ê£ÄÊü•ËÆæÂ§á"}[this.systemStatus]}},mounted:function(){var t=this;this.initChart(),this.getHumidityData(),this.dataUpdateInterval=setInterval(this.getHumidityData,6e4),this.chartUpdateInterval=setInterval(this.updateChartData,6e4),uni.onWindowResize((function(){var a;return null===(a=t.chart)||void 0===a?void 0:a.resize()}))},beforeDestroy:function(){var t;clearInterval(this.dataUpdateInterval),clearInterval(this.chartUpdateInterval),null===(t=this.chart)||void 0===t||t.dispose()},methods:{initChart:function(){var t=document.getElementById("humidityChart");t&&(this.chart=c.init(t,"light"),this.chart.setOption(this.chartOptions))},getHumidityData:function(){var t=this;return(0,o.default)((0,n.default)().mark((function a(){var e;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,uni.request({url:"".concat(d.default.baseURL,"/data"),method:"GET",timeout:8e3});case 3:e=a.sent,e.data&&(t.currentHumidity=e.data.humidity||0,t.humidityData=[].concat((0,r.default)(t.humidityData.slice(-59)),[t.currentHumidity]),t.timeData=[].concat((0,r.default)(t.timeData.slice(-59)),[new Date]),t.updateChart(),t.updateSystemStatus()),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](0),console.error("ÊπøÂ∫¶Êï∞ÊçÆËé∑ÂèñÂ§±Ë¥•:",a.t0),t.systemStatus="warning";case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))()},updateChart:function(){var t=this,a=this.timeData.map((function(a){return"hour"===t.timeFrame?"".concat(a.getHours(),":").concat(a.getMinutes().toString().padStart(2,"0")):"".concat(a.getDate(),"/").concat(a.getMonth()+1)})),e="hour"===this.timeFrame?6:5;this.chartOptions.xAxis.interval=Math.max(1,Math.floor(a.length/e)),this.chart.setOption({xAxis:{data:a},series:[{data:this.humidityData}]})},toggleTimeFrame:function(t){this.timeFrame=t,this.humidityData=[],this.timeData=[],this.getHumidityData()},updateSystemStatus:function(){this.currentHumidity>80?this.systemStatus="saving":this.humidityData.length>10&&this.humidityData.slice(-5).every((function(t){return t<10}))?this.systemStatus="warning":this.systemStatus="normal"},updateChartData:function(){this.humidityData.length>0&&(this.updateChart(),Â§çÂà∂‰ª£Á†Å,this.checkHumidityTrend())},checkHumidityTrend:function(){if(this.humidityData.length>=5){var t=this.humidityData.slice(-5),a=parseFloat((t[4]-t[0]).toFixed(1));if(a>10)return void(this.systemStatusTip="‚ö†Ô∏è ÊπøÂ∫¶Âø´ÈÄü‰∏äÂçá‰∏≠ (".concat(a.toFixed(1),"%RH/5ÂàÜÈíü)ÔºåÂª∫ËÆÆÊ£ÄÊü•ÈÄöÈ£éÁ≥ªÁªü"));if(a<-10)return void(this.systemStatusTip="‚ö†Ô∏è ÊπøÂ∫¶Âø´ÈÄü‰∏ãÈôç‰∏≠ (".concat(a.toFixed(1),"%RH/5ÂàÜÈíü)ÔºåÂª∫ËÆÆÊ£ÄÊü•Âä†ÊπøËÆæÂ§á"))}}}};a.default=u},2233:function(t,a,e){"use strict";var i=e("0eae"),s=e.n(i);s.a},"4e5d":function(t,a,e){"use strict";e("6a54"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i={baseURL:uni.getStorageSync("esp32_ip")||"http://192.168.4.1:5000"};a.default=i},"73e1":function(t,a,e){"use strict";var i=e("29d8");t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(i)},"795c":function(t,a,e){"use strict";var i=e("8bdb"),s=e("db04").start,n=e("73e1");i({target:"String",proto:!0,forced:n},{padStart:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},8268:function(t,a,e){"use strict";e.r(a);var i=e("d956"),s=e("1266");for(var n in s)["default"].indexOf(n)<0&&function(t){e.d(a,t,(function(){return s[t]}))}(n);e("2233");var r=e("828b"),o=Object(r["a"])(s["default"],i["b"],i["c"],!1,null,"b7f1887e",null,!1,i["a"],void 0);a["default"]=o.exports},be82:function(t,a,e){var i=e("c86c");a=i(!1),a.push([t.i,".page[data-v-b7f1887e]{padding:20px;background:#f8f9fa;min-height:100vh}.header-section[data-v-b7f1887e]{margin-bottom:25px}.title-text[data-v-b7f1887e]{font-size:22px;color:#2c3e50;font-weight:600;display:flex;align-items:center}.icon-humidity[data-v-b7f1887e]{font-size:26px;margin-right:10px}.data-card[data-v-b7f1887e]{background:#fff;border-radius:12px;padding:25px;box-shadow:0 2px 8px rgba(0,0,0,.1);margin-bottom:20px}.data-display[data-v-b7f1887e]{justify-content:space-between;align-items:center;margin-bottom:20px}.value-container[data-v-b7f1887e]{display:flex;align-items:baseline}.main-value[data-v-b7f1887e]{font-size:48px;font-weight:700;color:#1d2129;margin-right:8px}.unit[data-v-b7f1887e]{font-size:18px;color:#86909c;position:relative;top:-2px}.status-indicator[data-v-b7f1887e]{width:20px;height:20px;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.1);transition:background .3s ease}.status-message[data-v-b7f1887e]{padding:12px;border-radius:8px;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.quality-scale[data-v-b7f1887e]{height:6px;background:#eee;border-radius:3px;display:flex;overflow:hidden}.scale-item[data-v-b7f1887e]{flex:1;opacity:.3;transition:opacity .3s}.info-tip[data-v-b7f1887e], .system-tip[data-v-b7f1887e]{padding:15px;border-radius:8px;display:flex;align-items:center;margin-bottom:20px}.info-tip[data-v-b7f1887e]{background:#e3f2fd}.system-tip[data-v-b7f1887e]{background:#f5f5f5;border:1px solid #e0e0e0} \r\n/* Áä∂ÊÄÅÈ¢úËâ≤ÂÆö‰πâ */.dry[data-v-b7f1887e]{background:#ff9800}.dry.status-indicator[data-v-b7f1887e]{background:#ff9800}.dry.status-message[data-v-b7f1887e]{background:#fff3e0}.dry .message-text[data-v-b7f1887e]{color:#e65100}.comfortable[data-v-b7f1887e]{background:#2196f3}.comfortable.status-indicator[data-v-b7f1887e]{background:#2196f3}.comfortable.status-message[data-v-b7f1887e]{background:#e3f2fd}.comfortable .message-text[data-v-b7f1887e]{color:#1565c0}.humid[data-v-b7f1887e]{background:#4caf50}.humid.status-indicator[data-v-b7f1887e]{background:#4caf50}.humid.status-message[data-v-b7f1887e]{background:#e8f5e9}.humid .message-text[data-v-b7f1887e]{color:#2e7d32}.dry.active[data-v-b7f1887e]{background:#ff9800;opacity:1}.comfortable.active[data-v-b7f1887e]{background:#2196f3;opacity:1}.humid.active[data-v-b7f1887e]{background:#4caf50;opacity:1}.tip-icon[data-v-b7f1887e]{font-size:20px;margin-right:10px}.tip-text[data-v-b7f1887e]{font-size:14px;color:#1976d2;line-height:1.4}.system-tip .tip-text[data-v-b7f1887e]{color:#666}.chart-section[data-v-b7f1887e]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,.1);margin-bottom:20px}.section-title[data-v-b7f1887e]{font-size:16px;color:#2c3e50;font-weight:500;margin-bottom:15px;display:block}.chart-container[data-v-b7f1887e]{width:100%;height:300px;background:#fff;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,.1);padding:10px;box-sizing:border-box}.chart[data-v-b7f1887e]{width:100%;height:100%}.time-controls[data-v-b7f1887e]{margin-top:15px;justify-content:space-between}.time-button[data-v-b7f1887e]{flex:1;margin:0 5px;padding:8px 0;border-radius:6px;background:#f0f0f0;color:#666;font-size:14px;border:none}.time-button.active[data-v-b7f1887e]{background:#2196f3;color:#fff}",""]),t.exports=a},d956:function(t,a,e){"use strict";e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return s})),e.d(a,"a",(function(){}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"flex-col page"},[e("v-uni-view",{staticClass:"flex-col header-section"},[e("v-uni-text",{staticClass:"title-text"},[e("v-uni-text",{staticClass:"icon-humidity"},[t._v("üíß")]),t._v("Êô∫ËÉΩÊπøÂ∫¶ÁõëÊµã")],1)],1),e("v-uni-view",{staticClass:"data-card"},[e("v-uni-view",{staticClass:"flex-row data-display"},[e("v-uni-view",{staticClass:"value-container"},[e("v-uni-text",{staticClass:"main-value"},[t._v(t._s(t.currentHumidity.toFixed(1)))]),e("v-uni-text",{staticClass:"unit"},[t._v("%RH")])],1),e("v-uni-view",{staticClass:"status-indicator",class:t.humidityStatus})],1),e("v-uni-view",{staticClass:"status-message",class:t.humidityStatus},[e("v-uni-text",{staticClass:"message-text"},[t._v(t._s(t.statusMessage))]),e("v-uni-text",{staticClass:"message-icon"},[t._v(t._s(t.statusIcon))])],1),e("v-uni-view",{staticClass:"quality-scale"},[e("v-uni-view",{staticClass:"scale-item dry",class:{active:"dry"===t.humidityStatus}}),e("v-uni-view",{staticClass:"scale-item comfortable",class:{active:"comfortable"===t.humidityStatus}}),e("v-uni-view",{staticClass:"scale-item humid",class:{active:"humid"===t.humidityStatus}})],1)],1),t.humidityTip?e("v-uni-view",{staticClass:"info-tip"},[e("v-uni-text",{staticClass:"tip-icon"},[t._v("üí°")]),e("v-uni-text",{staticClass:"tip-text"},[t._v(t._s(t.humidityTip))])],1):t._e(),e("v-uni-view",{staticClass:"chart-section"},[e("v-uni-text",{staticClass:"section-title"},[t._v("ÊπøÂ∫¶ÂèòÂåñË∂ãÂäø ("+t._s("hour"===t.timeFrame?"ÊúÄËøë1Â∞èÊó∂":"ÊúÄËøë7Â§©")+")")]),e("v-uni-view",{staticClass:"chart-container"},[e("v-uni-canvas",{staticClass:"chart",attrs:{id:"humidityChart"}})],1),e("v-uni-view",{staticClass:"flex-row time-controls"},[e("v-uni-button",{staticClass:"time-button",class:{active:"hour"===t.timeFrame},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.toggleTimeFrame("hour")}}},[t._v("Â∞èÊó∂Êï∞ÊçÆ")]),e("v-uni-button",{staticClass:"time-button",class:{active:"day"===t.timeFrame},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.toggleTimeFrame("day")}}},[t._v("ÊØèÊó•Êï∞ÊçÆ")])],1)],1),t.systemStatusTip?e("v-uni-view",{staticClass:"system-tip"},[e("v-uni-text",{staticClass:"tip-icon"},[t._v("‚ÑπÔ∏è")]),e("v-uni-text",{staticClass:"tip-text"},[t._v(t._s(t.systemStatusTip))])],1):t._e()],1)},s=[]},db04:function(t,a,e){"use strict";var i=e("bb80"),s=e("c435"),n=e("9e70"),r=e("f298"),o=e("862c"),c=i(r),d=i("".slice),u=Math.ceil,l=function(t){return function(a,e,i){var r,l,f=n(o(a)),v=s(e),h=f.length,m=void 0===i?" ":n(i);return v<=h||""===m?f:(r=v-h,l=c(m,u(r/m.length)),l.length>r&&(l=d(l,0,r)),t?f+l:l+f)}};t.exports={start:l(!1),end:l(!0)}}}]);